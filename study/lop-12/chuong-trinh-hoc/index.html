<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch∆∞∆°ng Tr√¨nh Tin H·ªçc 10 (GDPT 2018) - H·ªçc Tin H·ªçc NDGB</title>
    <link rel="icon" href="/file/logo.png" type="image/png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        
        /* Custom Chart Container Styling as per requirements */
        .chart-wrapper {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        
        @media (max-width: 640px) {
            .chart-wrapper {
                height: 300px;
            }
        }

        .topic-card {
            transition: all 0.3s ease;
        }
        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .lesson-item {
            border-left: 2px solid #e2e8f0;
            transition: border-color 0.2s;
        }
        .lesson-item:hover {
            border-left-color: #3b82f6;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Professional Blues/Teals. Background: Slate 50. Primary: Blue 600. Accents: Teal (CS), Orange (ICT). This creates a calm, academic, yet modern feel. -->
    
    <!-- Application Structure Plan: 
         The app is designed as a "Curriculum Navigator" dashboard. 
         1. Header: Sets context (3 textbook synthesis).
         2. Interactive Dashboard (Top): Allows switching between "Core + CS" and "Core + ICT" views. This is crucial because students choose one path.
         3. Visualization Section: Two charts. One shows the distribution of topics (balance of knowledge), the other compares Theory vs. Practice ratio based on lesson titles.
         4. Content Explorer (Bottom): A filtered list of topics and lessons. Instead of a flat list, it uses collapsible cards for Topics to manage information density. 
         Rationale: This structure moves from high-level stats/structure to detailed lesson content, allowing users to understand the "Shape" of the curriculum before diving into specifics.
    -->

    <!-- Visualization & Content Choices:
         1. Goal: Overview of Knowledge Distribution -> Method: Doughnut Chart (Chart.js) -> Interaction: Updates based on CS/ICT filter -> Justification: Shows how much weight is given to Programming vs. Impact on Society vs. Tools.
         2. Goal: Theory vs. Practice Balance -> Method: Bar Chart (Chart.js) -> Interaction: Updates on filter -> Justification: Helps teachers/students prep for lab time vs. classroom time.
         3. Goal: Explore Curriculum -> Method: Interactive HTML Cards -> Interaction: Click to expand/collapse, Search filter -> Justification: Handles the long list of 32 lessons without overwhelming the user.
         4. Goal: Context -> Method: Text summaries -> Interaction: Static context blocks -> Justification: Explains the "Why" behind each section.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-bold text-slate-800">Tin H·ªçc 10 - GDPT 2018</h1>
                <p class="text-sm text-slate-500 mt-1">T·ªïng h·ª£p: K·∫øt n·ªëi tri th·ª©c ‚Ä¢ Ch√¢n tr·ªùi s√°ng t·∫°o ‚Ä¢ C√°nh di·ªÅu</p>
            </div>
            <div class="mt-4 md:mt-0 flex gap-2">
                <a href="/index.html" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-slate-100 text-slate-600 border border-slate-300 hover:bg-slate-200">Trang ch·ªß</a>
                <a href="/study/lop-12" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-slate-100 text-slate-600 border border-slate-300 hover:bg-slate-200">Quay l·∫°i</a>
                <button onclick="setMode('cs')" id="btn-cs" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-blue-600 text-white shadow-md hover:bg-blue-700">Khoa h·ªçc m√°y t√≠nh (CS)</button>
                <button onclick="setMode('ict')" id="btn-ict" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50">Tin h·ªçc ·ª©ng d·ª•ng (ICT)</button>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 w-full space-y-8">

        <!-- Intro Section -->
        <section class="bg-white rounded-xl p-6 shadow-sm border border-slate-100">
            <h2 class="text-lg font-semibold text-slate-800 mb-2">T·ªïng quan l·ªô tr√¨nh h·ªçc t·∫≠p</h2>
            <p class="text-slate-600 leading-relaxed">
                ·ª®ng d·ª•ng n√†y gi√∫p b·∫°n h√¨nh dung to√†n b·ªô l·ªô tr√¨nh m√¥n Tin h·ªçc l·ªõp 10. Ch∆∞∆°ng tr√¨nh ƒë∆∞·ª£c chia th√†nh hai ph·∫ßn ch√≠nh: 
                <span class="font-semibold text-blue-600">Ki·∫øn th·ª©c c·ªët l√µi</span> (b·∫Øt bu·ªôc cho t·∫•t c·∫£) v√† 
                <span class="font-semibold text-teal-600">Ki·∫øn th·ª©c ƒë·ªãnh h∆∞·ªõng</span> (t·ª± ch·ªçn chuy√™n s√¢u).
                H√£y s·ª≠ d·ª•ng c√°c n√∫t ph√≠a tr√™n ƒë·ªÉ xem l·ªô tr√¨nh ph√π h·ª£p v·ªõi ƒë·ªãnh h∆∞·ªõng c·ªßa l·ªõp b·∫°n (CS ho·∫∑c ICT).
                D·ªØ li·ªáu b√™n d∆∞·ªõi ƒë∆∞·ª£c t·ªïng h·ª£p ƒë·ªÉ ph√π h·ª£p v·ªõi c·∫£ 3 b·ªô s√°ch hi·ªán h√†nh.
            </p>
        </section>

        <!-- Stats & Visualization Grid -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Chart 1: Topic Distribution -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="text-lg font-semibold text-slate-800">C·∫•u tr√∫c ph√¢n b·ªï ch·ªß ƒë·ªÅ</h3>
                    <p class="text-sm text-slate-500">T·ª∑ tr·ªçng s·ªë l∆∞·ª£ng b√†i h·ªçc gi·ªØa c√°c ch·ªß ƒë·ªÅ ch√≠nh.</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-50 rounded-lg p-4">
                    <div class="chart-wrapper">
                        <canvas id="topicDistributionChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-xs text-center text-slate-400">
                    Ch·ªß ƒë·ªÅ F (L·∫≠p tr√¨nh) v√† E (ƒê·ªãnh h∆∞·ªõng) chi·∫øm th·ªùi l∆∞·ª£ng l·ªõn nh·∫•t.
                </div>
            </div>

            <!-- Chart 2: Theory vs Practice -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="text-lg font-semibold text-slate-800">L√Ω thuy·∫øt vs Th·ª±c h√†nh</h3>
                    <p class="text-sm text-slate-500">T·ª∑ l·ªá c√°c b√†i c√≥ y·∫øu t·ªë th·ª±c h√†nh tr·ª±c ti·∫øp tr√™n m√°y t√≠nh.</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-50 rounded-lg p-4">
                    <div class="chart-wrapper">
                        <canvas id="practiceRatioChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-xs text-center text-slate-400">
                    D·ª±a tr√™n ph√¢n t√≠ch t·ª´ kh√≥a "Th·ª±c h√†nh", "L√†m quen", "S·ª≠ d·ª•ng" trong t√™n b√†i.
                </div>
            </div>
        </section>

        <!-- Search & Filter Bar -->
        <section class="flex flex-col sm:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm sticky top-24 z-40">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üìö</span>
                <div>
                    <h3 class="font-bold text-slate-800">Chi ti·∫øt ch∆∞∆°ng tr√¨nh</h3>
                    <span id="total-lessons-badge" class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">31 B√†i</span>
                </div>
            </div>
            <div class="w-full sm:w-auto relative">
                <input type="text" id="search-input" placeholder="T√¨m ki·∫øm b√†i h·ªçc (VD: Python, M·∫°ng)..." 
                       class="w-full sm:w-64 pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <span class="absolute left-3 top-2.5 text-slate-400">üîç</span>
            </div>
        </section>

        <!-- Dynamic Content List -->
        <section id="curriculum-container" class="space-y-6">
            <!-- Content will be injected here via JavaScript -->
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-12 py-8 text-center text-slate-500 text-sm">
        <p>¬© 2025 H·ªçc Tin H·ªçc NDGB.</p>
        <p class="mt-1">D·ªØ li·ªáu d·ª±a tr√™n Ch∆∞∆°ng tr√¨nh GDPT 2018 - B·ªô Gi√°o d·ª•c v√† ƒê√†o t·∫°o.</p>
    </footer>

    <script>
        // --- DATA STORE ---
        const curriculumData = {
            core: [
                {
                    id: "A",
                    name: "Ch·ªß ƒë·ªÅ A: M√°y t√≠nh v√† X√£ h·ªôi tri th·ª©c",
                    desc: "N·ªÅn t·∫£ng v·ªÅ th√¥ng tin, d·ªØ li·ªáu s·ªë v√† l·ªãch s·ª≠ m√°y t√≠nh.",
                    lessons: [
                        { num: 1, title: "Th√¥ng tin v√† x·ª≠ l√Ω th√¥ng tin", type: "theory" },
                        { num: 2, title: "Vai tr√≤ c·ªßa thi·∫øt b·ªã th√¥ng minh v√† tin h·ªçc trong ƒë·ªùi s·ªëng", type: "theory" },
                        { num: 3, title: "M·ªôt s·ªë ki·ªÉu d·ªØ li·ªáu v√† d·ªØ li·ªáu vƒÉn b·∫£n", type: "theory" },
                        { num: 4, title: "H·ªá nh·ªã ph√¢n v√† d·ªØ li·ªáu s·ªë nguy√™n", type: "theory" },
                        { num: 5, title: "D·ªØ li·ªáu l√¥gic (Boolean)", type: "theory" },
                        { num: 6, title: "D·ªØ li·ªáu √¢m thanh v√† h√¨nh ·∫£nh", type: "theory" },
                        { num: 7, title: "Th·ª±c h√†nh: S·ª≠ d·ª•ng thi·∫øt b·ªã s·ªë v√† c√°c ph·∫ßn m·ªÅm th√¥ng d·ª•ng", type: "practice" }
                    ]
                },
                {
                    id: "B",
                    name: "Ch·ªß ƒë·ªÅ B: M·∫°ng m√°y t√≠nh v√† Internet",
                    desc: "Hi·ªÉu bi·∫øt v·ªÅ k·∫øt n·ªëi, IoT v√† an to√†n d·ªØ li·ªáu.",
                    lessons: [
                        { num: 8, title: "M·∫°ng m√°y t√≠nh trong cu·ªôc s·ªëng hi·ªán ƒë·∫°i", type: "theory" },
                        { num: 9, title: "An to√†n tr√™n kh√¥ng gian m·∫°ng", type: "theory" },
                        { num: 10, title: "Th·ª±c h√†nh: Khai th√°c t√†i nguy√™n tr√™n Internet", type: "practice" }
                    ]
                },
                {
                    id: "C",
                    name: "Ch·ªß ƒë·ªÅ C: ƒê·∫°o ƒë·ª©c, Ph√°p lu·∫≠t v√† VƒÉn h√≥a",
                    desc: "H√†nh trang c√¥ng d√¢n s·ªë: B·∫£n quy·ªÅn v√† ·ª©ng x·ª≠.",
                    lessons: [
                        { num: 11, title: "·ª®ng x·ª≠ tr√™n m√¥i tr∆∞·ªùng s·ªë v√† nghƒ©a v·ª• t√¥n tr·ªçng b·∫£n quy·ªÅn", type: "theory" }
                    ]
                },
                {
                    id: "D",
                    name: "Ch·ªß ƒë·ªÅ D: ·ª®ng d·ª•ng Tin h·ªçc (C∆° b·∫£n)",
                    desc: "K·ªπ nƒÉng ph·∫ßn m·ªÅm vƒÉn ph√≤ng v√† ƒëa ph∆∞∆°ng ti·ªán n√¢ng cao.",
                    lessons: [
                        { num: 12, title: "Ph·∫ßn m·ªÅm thi·∫øt k·∫ø ƒë·ªì ho·∫° v√† bi√™n t·∫≠p ·∫£nh (Gi·ªõi thi·ªáu chung)", type: "theory" },
                        { num: 13, title: "B·ªï sung c√°c ƒë·ªëi t∆∞·ª£ng ƒë·ªì h·ªça trong vƒÉn b·∫£n", type: "practice" },
                        { num: 14, title: "L√†m vi·ªác v·ªõi ƒë·ªëi t∆∞·ª£ng ƒëa ph∆∞∆°ng ti·ªán trong b√†i tr√¨nh chi·∫øu", type: "practice" }
                    ]
                },
                {
                    id: "F",
                    name: "Ch·ªß ƒë·ªÅ F: Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ v·ªõi m√°y t√≠nh (Python)",
                    desc: "T∆∞ duy l·∫≠p tr√¨nh v√† gi·∫£i thu·∫≠t c∆° b·∫£n.",
                    lessons: [
                        { num: 15, title: "L√†m quen v·ªõi ng√¥n ng·ªØ l·∫≠p tr√¨nh b·∫≠c cao (Python)", type: "practice" },
                        { num: 16, title: "Bi·∫øn v√† l·ªánh g√°n", type: "theory" },
                        { num: 17, title: "C√°c l·ªánh v√†o ra ƒë∆°n gi·∫£n", type: "practice" },
                        { num: 18, title: "C√¢u l·ªánh ƒëi·ªÅu ki·ªán (if, if-else)", type: "practice" },
                        { num: 19, title: "C√¢u l·ªánh l·∫∑p (for)", type: "practice" },
                        { num: 20, title: "C√¢u l·ªánh l·∫∑p (while)", type: "practice" },
                        { num: 21, title: "Ki·ªÉu d·ªØ li·ªáu danh s√°ch (List)", type: "practice" },
                        { num: 22, title: "Ki·ªÉu d·ªØ li·ªáu x√¢u k√Ω t·ª± (String)", type: "practice" },
                        { num: 23, title: "C·∫•u tr√∫c ch∆∞∆°ng tr√¨nh con (H√†m - Def)", type: "practice" },
                        { num: 24, title: "Th·ª±c h√†nh: Ki·ªÉm th·ª≠ v√† g·ª° l·ªói ch∆∞∆°ng tr√¨nh", type: "practice" }
                    ]
                },
                {
                    id: "G",
                    name: "Ch·ªß ƒë·ªÅ G: H∆∞·ªõng nghi·ªáp v·ªõi Tin h·ªçc",
                    desc: "ƒê·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp t∆∞∆°ng lai.",
                    lessons: [
                        { num: 25, title: "Ngh·ªÅ nghi·ªáp v√† c∆° h·ªôi vi·ªác l√†m trong lƒ©nh v·ª±c Tin h·ªçc", type: "theory" },
                        { num: 26, title: "Gi·ªõi t√≠nh v√† ph√°p lu·∫≠t trong ho·∫°t ƒë·ªông CNTT", type: "theory" }
                    ]
                }
            ],
            cs: [
                {
                    id: "E-CS",
                    name: "Ch·ªß ƒë·ªÅ E (CS): Khoa h·ªçc M√°y t√≠nh",
                    desc: "Chuy√™n s√¢u v·ªÅ thu·∫≠t to√°n v√† t∆∞ duy m√°y t√≠nh.",
                    lessons: [
                        { num: 27, title: "M·ªôt s·ªë b√†i to√°n t√¨m ki·∫øm (Tu·∫ßn t·ª±, Nh·ªã ph√¢n)", type: "theory" },
                        { num: 28, title: "Thu·∫≠t to√°n s·∫Øp x·∫øp (Ch√®n, Ch·ªçn, N·ªïi b·ªçt)", type: "theory" },
                        { num: 29, title: "Nh·∫≠n bi·∫øt ƒë·ªô ph·ª©c t·∫°p thu·∫≠t to√°n", type: "theory" },
                        { num: 30, title: "Ki·ªÉm th·ª≠ v√† ƒë√°nh gi√° ch∆∞∆°ng tr√¨nh", type: "theory" },
                        { num: 31, title: "Th·ª±c h√†nh t·ªïng h·ª£p: Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ b·∫±ng m√°y t√≠nh", type: "practice" }
                    ]
                }
            ],
            ict: [
                {
                    id: "E-ICT",
                    name: "Ch·ªß ƒë·ªÅ E (ICT): Tin h·ªçc ·ª®ng d·ª•ng",
                    desc: "Chuy√™n s√¢u v·ªÅ thi·∫øt k·∫ø ƒë·ªì h·ªça v√† truy·ªÅn th√¥ng s·ªë.",
                    lessons: [
                        { num: 27, title: "Ph·∫ßn m·ªÅm thi·∫øt k·∫ø ƒë·ªì h·ªça (L√†m quen Inkscape/GIMP)", type: "practice" },
                        { num: 28, title: "V·∫Ω v√† ch·ªânh s·ª≠a c√°c h√¨nh c∆° b·∫£n", type: "practice" },
                        { num: 29, title: "L√†m vi·ªác v·ªõi c√°c l·ªõp ·∫£nh (Layers) v√† v√πng ch·ªçn", type: "practice" },
                        { num: 30, title: "Bi·∫øn ƒë·ªïi v√† hi·ªáu ch·ªânh m√†u s·∫Øc", type: "practice" },
                        { num: 31, title: "Th√™m vƒÉn b·∫£n v√† ho√†n thi·ªán s·∫£n ph·∫©m thi·∫øt k·∫ø ƒë·ªì h·ªça", type: "practice" },
                        { num: 32, title: "Th·ª±c h√†nh t·ªïng h·ª£p: Thi·∫øt k·∫ø s·∫£n ph·∫©m truy·ªÅn th√¥ng ƒë·∫ßu tay", type: "practice" }
                    ]
                }
            ]
        };

        // --- STATE MANAGEMENT ---
        let currentMode = 'cs'; // 'cs' or 'ict'
        let chartInstances = {};

        // --- DOM ELEMENTS ---
        const container = document.getElementById('curriculum-container');
        const searchInput = document.getElementById('search-input');
        const btnCS = document.getElementById('btn-cs');
        const btnICT = document.getElementById('btn-ict');
        const badge = document.getElementById('total-lessons-badge');

        // --- INITIALIZATION ---
        function init() {
            renderContent();
            initCharts();
            updateUIState();
        }

        // --- CORE FUNCTIONS ---
        function setMode(mode) {
            currentMode = mode;
            updateUIState();
            renderContent();
            updateCharts();
        }

        function updateUIState() {
            if (currentMode === 'cs') {
                btnCS.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-blue-600 text-white shadow-md hover:bg-blue-700";
                btnICT.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50";
            } else {
                btnICT.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-orange-500 text-white shadow-md hover:bg-orange-600";
                btnCS.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50";
            }
        }

        function getDataByMode() {
            const core = [...curriculumData.core];
            const elective = currentMode === 'cs' ? [...curriculumData.cs] : [...curriculumData.ict];
            return [...core, ...elective];
        }

        // --- RENDERING CONTENT ---
        function renderContent() {
            const data = getDataByMode();
            const searchTerm = searchInput.value.toLowerCase();
            let html = '';
            let totalLessons = 0;

            data.forEach(topic => {
                // Filter logic
                const filteredLessons = topic.lessons.filter(l => 
                    l.title.toLowerCase().includes(searchTerm) || 
                    l.num.toString().includes(searchTerm)
                );

                // Even if no lessons match, if the Topic Name matches, show all lessons
                const topicMatches = topic.name.toLowerCase().includes(searchTerm);
                const lessonsToShow = topicMatches ? topic.lessons : filteredLessons;

                if (lessonsToShow.length > 0) {
                    totalLessons += lessonsToShow.length;
                    
                    // Determine styling based on topic type
                    const isElective = topic.id.startsWith('E');
                    const headerColor = isElective 
                        ? (currentMode === 'cs' ? 'border-l-4 border-teal-500 bg-teal-50' : 'border-l-4 border-orange-500 bg-orange-50') 
                        : 'border-l-4 border-blue-500 bg-white';
                    
                    const titleColor = isElective
                        ? (currentMode === 'cs' ? 'text-teal-700' : 'text-orange-700')
                        : 'text-blue-700';

                    html += `
                        <div class="topic-card rounded-lg shadow-sm border border-slate-200 overflow-hidden">
                            <div class="${headerColor} p-4 cursor-pointer" onclick="toggleDetails('${topic.id}')">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h3 class="font-bold text-lg ${titleColor}">${topic.name}</h3>
                                        <p class="text-sm text-slate-500 mt-1">${topic.desc}</p>
                                    </div>
                                    <span class="text-slate-400 text-sm font-mono bg-white px-2 py-1 rounded border border-slate-200">
                                        ${lessonsToShow.length} B√†i
                                    </span>
                                </div>
                            </div>
                            <div id="details-${topic.id}" class="bg-white p-4 hidden border-t border-slate-100">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    ${lessonsToShow.map(lesson => `
                                        <div class="lesson-item pl-3 py-2 text-sm text-slate-700 bg-slate-50 rounded-r hover:bg-slate-100 flex justify-between items-center group">
                                            <span>
                                                <span class="font-bold text-slate-400 mr-2">B√†i ${lesson.num}:</span>
                                                ${lesson.title}
                                            </span>
                                            ${lesson.type === 'practice' 
                                                ? '<span class="text-[10px] uppercase font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded ml-2 opacity-70 group-hover:opacity-100">Th·ª±c h√†nh</span>' 
                                                : '<span class="text-[10px] uppercase font-bold text-slate-500 bg-slate-200 px-2 py-0.5 rounded ml-2 opacity-0 group-hover:opacity-50">L√Ω thuy·∫øt</span>'}
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                }
            });

            if (html === '') {
                html = `<div class="text-center py-10 text-slate-400">Kh√¥ng t√¨m th·∫•y b√†i h·ªçc n√†o ph√π h·ª£p v·ªõi t·ª´ kh√≥a "${searchTerm}".</div>`;
            }

            container.innerHTML = html;
            badge.innerText = `${totalLessons} B√†i`;
            
            // Auto expand first topic or search results
            if (searchTerm !== '') {
                 data.forEach(t => {
                     const el = document.getElementById(`details-${t.id}`);
                     if (el) el.classList.remove('hidden');
                 });
            }
        }

        // Toggle Accordion
        window.toggleDetails = function(id) {
            const el = document.getElementById(`details-${id}`);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
                el.classList.add('block');
            } else {
                el.classList.add('hidden');
                el.classList.remove('block');
            }
        }

        // --- CHARTS LOGIC ---
        function initCharts() {
            // Chart 1: Topic Distribution (Doughnut)
            const ctx1 = document.getElementById('topicDistributionChart').getContext('2d');
            chartInstances.topic = new Chart(ctx1, {
                type: 'doughnut',
                data: getTopicChartData(),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, font: { size: 11 } } },
                        tooltip: { 
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw} b√†i`;
                                }
                            }
                        }
                    }
                }
            });

            // Chart 2: Theory vs Practice (Bar)
            const ctx2 = document.getElementById('practiceRatioChart').getContext('2d');
            chartInstances.practice = new Chart(ctx2, {
                type: 'bar',
                data: getPracticeChartData(),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, ticks: { stepSize: 1 } }
                    },
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'S·ªë l∆∞·ª£ng b√†i Th·ª±c h√†nh vs L√Ω thuy·∫øt' }
                    }
                }
            });
        }

        function updateCharts() {
            const topicData = getTopicChartData();
            chartInstances.topic.data = topicData;
            chartInstances.topic.update();

            const practiceData = getPracticeChartData();
            chartInstances.practice.data = practiceData;
            chartInstances.practice.update();
        }

        function getTopicChartData() {
            const data = getDataByMode();
            const labels = data.map(t => t.id.split(':')[0].replace('Ch·ªß ƒë·ªÅ ', ''));
            const counts = data.map(t => t.lessons.length);
            
            // Colors
            const bgColors = labels.map(l => {
                if (l.includes('A')) return '#94a3b8'; // slate
                if (l.includes('B')) return '#64748b'; // slate dark
                if (l.includes('C')) return '#cbd5e1'; // slate light
                if (l.includes('D')) return '#60a5fa'; // blue
                if (l.includes('F')) return '#3b82f6'; // blue strong
                if (l.includes('G')) return '#93c5fd'; // blue light
                if (l.includes('E') && currentMode === 'cs') return '#14b8a6'; // teal
                if (l.includes('E') && currentMode === 'ict') return '#f97316'; // orange
                return '#ccc';
            });

            return {
                labels: labels,
                datasets: [{
                    data: counts,
                    backgroundColor: bgColors,
                    borderWidth: 0
                }]
            };
        }

        function getPracticeChartData() {
            const data = getDataByMode();
            let practiceCount = 0;
            let theoryCount = 0;

            data.forEach(t => {
                t.lessons.forEach(l => {
                    if (l.type === 'practice') practiceCount++;
                    else theoryCount++;
                });
            });

            return {
                labels: ['L√Ω thuy·∫øt', 'Th·ª±c h√†nh'],
                datasets: [{
                    label: 'S·ªë l∆∞·ª£ng b√†i',
                    data: [theoryCount, practiceCount],
                    backgroundColor: ['#94a3b8', currentMode === 'cs' ? '#14b8a6' : '#f97316'],
                    borderRadius: 5
                }]
            };
        }

        // --- EVENT LISTENERS ---
        searchInput.addEventListener('input', renderContent);

        // --- RUN ---
        init();

    </script>
</body>
</html>