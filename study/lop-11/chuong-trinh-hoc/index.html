<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch∆∞∆°ng Tr√¨nh H·ªçc Tin H·ªçc 11 (GDPT 2018) - NDGB</title>
    <!-- Placeholder for icon, assuming /file/logo.png is not available in this environment -->
    <link rel="icon" href="/file/logo.png" type="image/png" /> 
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Thi·∫øt l·∫≠p font v√† m√†u n·ªÅn chung */
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }
        
        /* ƒê·ªãnh ki·ªÉu cho bi·ªÉu ƒë·ªì ƒë·ªÉ ƒë·∫£m b·∫£o Responsive */
        .chart-wrapper {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        
        @media (max-width: 640px) {
            .chart-wrapper {
                height: 300px;
            }
        }

        /* Hi·ªáu ·ª©ng di chu·ªôt cho th·∫ª Ch·ªß ƒë·ªÅ */
        .topic-card {
            transition: all 0.3s ease;
        }
        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* Hi·ªáu ·ª©ng vi·ªÅn tr√°i cho t·ª´ng b√†i h·ªçc */
        .lesson-item {
            border-left: 2px solid #e2e8f0;
            transition: border-color 0.2s;
        }
        .lesson-item:hover {
            border-left-color: #3b82f6;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-bold text-slate-800">Tin H·ªçc 11 - GDPT 2018</h1>
                <p class="text-sm text-slate-500 mt-1">T·ªïng h·ª£p: K·∫øt n·ªëi tri th·ª©c ‚Ä¢ Ch√¢n tr·ªùi s√°ng t·∫°o ‚Ä¢ C√°nh di·ªÅu</p>
            </div>
            <!-- Chuy·ªÉn ƒë·ªïi gi·ªØa ƒë·ªãnh h∆∞·ªõng CS v√† ICT (Gi·ªØ nguy√™n giao di·ªán c·ªßa file g·ªëc) -->
            <div class="mt-4 md:mt-0 flex gap-2">
                <a href="/index.html" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-slate-100 text-slate-600 border border-slate-300 hover:bg-slate-200">Trang ch·ªß</a>
                <a href="/study/lop-10" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-slate-100 text-slate-600 border border-slate-300 hover:bg-slate-200">Quay l·∫°i</a>
                <button onclick="setMode('cs')" id="btn-cs" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-blue-600 text-white shadow-md hover:bg-blue-700">Khoa h·ªçc m√°y t√≠nh (CS)</button>
                <button onclick="setMode('ict')" id="btn-ict" class="px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50">Tin h·ªçc ·ª©ng d·ª•ng (ICT)</button>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 py-8 w-full space-y-8">

        <!-- Intro Section -->
        <section class="bg-white rounded-xl p-6 shadow-sm border border-slate-100">
            <h2 class="text-lg font-semibold text-slate-800 mb-2">T·ªïng quan l·ªô tr√¨nh h·ªçc t·∫≠p L·ªõp 11</h2>
            <p class="text-slate-600 leading-relaxed">
                Ch∆∞∆°ng tr√¨nh Tin h·ªçc l·ªõp 11 t·∫≠p trung v√†o hai kh·ªëi ki·∫øn th·ª©c ch√≠nh: <span class="font-semibold text-blue-600">L·∫≠p tr√¨nh v√† Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ</span> (H·ªçc k√¨ I) v√† <span class="font-semibold text-teal-600">C√¥ng ngh·ªá th√¥ng tin trong chuy·ªÉn ƒë·ªïi s·ªë</span> (H·ªçc k√¨ II).
                <br>C√°c n·ªôi dung ƒê·ªãnh h∆∞·ªõng chuy√™n s√¢u ƒë∆∞·ª£c chia th√†nh:
                <span class="font-semibold text-teal-600">Chuy√™n ƒë·ªÅ CS</span> (L·∫≠p tr√¨nh chuy√™n s√¢u, C·∫•u tr√∫c d·ªØ li·ªáu) v√†
                <span class="font-semibold text-orange-500">Chuy√™n ƒë·ªÅ ICT</span> (X·ª≠ l√Ω ƒêa ph∆∞∆°ng ti·ªán, Website).
            </p>
        </section>

        <!-- Stats & Visualization Grid -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Chart 1: Topic Distribution -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="text-lg font-semibold text-slate-800">C·∫•u tr√∫c ph√¢n b·ªï ch·ªß ƒë·ªÅ</h3>
                    <p class="text-sm text-slate-500">T·ª∑ tr·ªçng s·ªë l∆∞·ª£ng b√†i h·ªçc gi·ªØa c√°c ch·ªß ƒë·ªÅ ch√≠nh.</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-50 rounded-lg p-4">
                    <div class="chart-wrapper">
                        <canvas id="topicDistributionChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-xs text-center text-slate-400">
                    Ch·ªß ƒë·ªÅ C (L·∫≠p tr√¨nh) v√† E (Chuy√™n ƒë·ªÅ) chi·∫øm th·ªùi l∆∞·ª£ng l·ªõn nh·∫•t.
                </div>
            </div>

            <!-- Chart 2: Theory vs Practice -->
            <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="text-lg font-semibold text-slate-800">L√Ω thuy·∫øt vs Th·ª±c h√†nh</h3>
                    <p class="text-sm text-slate-500">T·ª∑ l·ªá c√°c b√†i c√≥ y·∫øu t·ªë th·ª±c h√†nh tr·ª±c ti·∫øp tr√™n m√°y t√≠nh.</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-50 rounded-lg p-4">
                    <div class="chart-wrapper">
                        <canvas id="practiceRatioChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-xs text-center text-slate-400">
                    D·ª±a tr√™n ph√¢n t√≠ch t·ª´ kh√≥a "Th·ª±c h√†nh", "L√†m quen", "S·ª≠ d·ª•ng" trong t√™n b√†i.
                </div>
            </div>
        </section>

        <!-- Search & Filter Bar -->
        <section class="flex flex-col sm:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-slate-200 shadow-sm sticky top-24 z-40">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üìö</span>
                <div>
                    <h3 class="font-bold text-slate-800">Chi ti·∫øt ch∆∞∆°ng tr√¨nh</h3>
                    <span id="total-lessons-badge" class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">27 B√†i</span>
                </div>
            </div>
            <div class="w-full sm:w-auto relative">
                <input type="text" id="search-input" placeholder="T√¨m ki·∫øm b√†i h·ªçc (VD: Database, AI)..." 
                       class="w-full sm:w-64 pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <span class="absolute left-3 top-2.5 text-slate-400">üîç</span>
            </div>
        </section>

        <!-- Dynamic Content List -->
        <section id="curriculum-container" class="space-y-6">
            <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y b·∫±ng JavaScript -->
        </section>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-12 py-8 text-center text-slate-500 text-sm">
        <p>¬© 2025 H·ªçc Tin H·ªçc NDGB.</p>
        <p class="mt-1">D·ªØ li·ªáu d·ª±a tr√™n Ch∆∞∆°ng tr√¨nh GDPT 2018 - B·ªô Gi√°o d·ª•c v√† ƒê√†o t·∫°o.</p>
    </footer>

    <script>
        // --- D·ªÆ LI·ªÜU CH∆Ø∆†NG TR√åNH L·ªöP 11 ---
        const curriculumData = {
            // D·ªØ li·ªáu C·ªêT L√ïI (B·∫Øt bu·ªôc) - B√†i 1 ƒë·∫øn B√†i 22
            core: [
                {
                    id: "A",
                    name: "Ch·ªß ƒë·ªÅ A: M√°y t√≠nh v√† c·ªông ƒë·ªìng",
                    desc: "N·ªÅn t·∫£ng v·ªÅ m√°y t√≠nh, m·∫°ng v√† an to√†n th√¥ng tin.",
                    lessons: [
                        { num: 1, title: "Th√¥ng tin v√† d·ªØ li·ªáu (√¥n t·∫≠p, chuy√™n s√¢u h∆°n)", type: "theory" },
                        { num: 2, title: "M·∫°ng m√°y t√≠nh v√† Internet", type: "theory" },
                        { num: 3, title: "H·ªá ƒëi·ªÅu h√†nh v√† ph·∫ßn m·ªÅm", type: "theory" },
                        { num: 4, title: "An to√†n v√† b·∫£o m·∫≠t th√¥ng tin", type: "theory" }
                    ]
                },
                {
                    id: "B",
                    name: "Ch·ªß ƒë·ªÅ B: T·ªï ch·ª©c l∆∞u tr·ªØ, t√¨m ki·∫øm v√† trao ƒë·ªïi th√¥ng tin",
                    desc: "Bi·ªÉu di·ªÖn s·ªë li·ªáu, c·∫•u tr√∫c d·ªØ li·ªáu v√† C∆° s·ªü d·ªØ li·ªáu.",
                    lessons: [
                        { num: 5, title: "Bi·ªÉu di·ªÖn s·ªë nguy√™n, s·ªë th·ª±c", type: "theory" },
                        { num: 6, title: "C·∫•u tr√∫c d·ªØ li·ªáu c∆° b·∫£n (M·∫£ng, Danh s√°ch)", type: "theory" },
                        { num: 7, title: "Kh√°i ni·ªám v·ªÅ C∆° s·ªü d·ªØ li·ªáu", type: "theory" },
                        { num: 8, title: "H·ªá Qu·∫£n tr·ªã C∆° s·ªü d·ªØ li·ªáu (DBMS) - Th·ª±c h√†nh truy v·∫•n", type: "practice" }
                    ]
                },
                {
                    id: "C",
                    name: "Ch·ªß ƒë·ªÅ C: Gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ v·ªõi s·ª± tr·ª£ gi√∫p c·ªßa m√°y t√≠nh",
                    desc: "L·∫≠p tr√¨nh Python n√¢ng cao: C·∫•u tr√∫c ƒëi·ªÅu khi·ªÉn, H√†m, Thu·∫≠t to√°n.",
                    lessons: [
                        { num: 9, title: "Ng√¥n ng·ªØ l·∫≠p tr√¨nh Python (√în t·∫≠p c·∫•u tr√∫c c∆° b·∫£n)", type: "theory" },
                        { num: 10, title: "C·∫•u tr√∫c ƒëi·ªÅu khi·ªÉn r·∫Ω nh√°nh (if/elif/else)", type: "practice" },
                        { num: 11, title: "C·∫•u tr√∫c ƒëi·ªÅu khi·ªÉn l·∫∑p (for, while)", type: "practice" },
                        { num: 12, title: "H√†m v√† ch∆∞∆°ng tr√¨nh con", type: "practice" },
                        { num: 13, title: "Thu·∫≠t to√°n T√¨m ki·∫øm c∆° b·∫£n (Tu·∫ßn t·ª±, Nh·ªã ph√¢n)", type: "theory" },
                        { num: 14, title: "Thu·∫≠t to√°n S·∫Øp x·∫øp c∆° b·∫£n (Ch·ªçn, N·ªïi b·ªçt)", type: "theory" },
                        { num: 15, title: "Luy·ªán t·∫≠p l·∫≠p tr√¨nh t·ªïng h·ª£p", type: "practice" }
                    ]
                },
                {
                    id: "D",
                    name: "Ch·ªß ƒë·ªÅ D: ƒê·∫°o ƒë·ª©c, ph√°p lu·∫≠t v√† vƒÉn h√≥a trong m√¥i tr∆∞·ªùng s·ªë",
                    desc: "Ph·∫©m ch·∫•t c√¥ng d√¢n s·ªë v√† tr√°ch nhi·ªám ph√°p l√≠.",
                    lessons: [
                        { num: 16, title: "Quy·ªÅn ri√™ng t∆∞ v√† B·∫£o v·ªá d·ªØ li·ªáu c√° nh√¢n", type: "theory" },
                        { num: 17, title: "B·∫£n quy·ªÅn v√† S·ªü h·ªØu tr√≠ tu·ªá", type: "theory" },
                        { num: 18, title: "VƒÉn h√≥a ·ª©ng x·ª≠ trong m√¥i tr∆∞·ªùng s·ªë", type: "theory" }
                    ]
                },
                {
                    id: "F",
                    name: "Ch·ªß ƒë·ªÅ F: M√°y t√≠nh v√† khoa h·ªçc t√≠nh to√°n",
                    desc: "L√†m quen v·ªõi AI, Big Data, IoT v√† h·ªá th·ªëng nh√∫ng.",
                    lessons: [
                        { num: 23, title: "Kh√°i ni·ªám v·ªÅ Tr√≠ tu·ªá nh√¢n t·∫°o (AI) v√† ·ª©ng d·ª•ng", type: "theory" },
                        { num: 24, title: "Khoa h·ªçc d·ªØ li·ªáu v√† D·ªØ li·ªáu l·ªõn (Big Data)", type: "theory" },
                        { num: 25, title: "H·ªá th·ªëng nh√∫ng v√† Internet v·∫°n v·∫≠t (IoT)", type: "theory" }
                    ]
                },
                {
                    id: "G",
                    name: "Ch·ªß ƒë·ªÅ G: H∆∞·ªõng nghi·ªáp",
                    desc: "ƒê·ªãnh h∆∞·ªõng v√† c√°c k·ªπ nƒÉng c·∫ßn thi·∫øt trong ng√†nh CNTT.",
                    lessons: [
                        { num: 26, title: "C√°c lƒ©nh v·ª±c ngh·ªÅ nghi·ªáp trong Tin h·ªçc", type: "theory" },
                        { num: 27, title: "Y√™u c·∫ßu v·ªÅ ph·∫©m ch·∫•t v√† nƒÉng l·ª±c", type: "theory" }
                    ]
                }
            ],
            // Ch·ªß ƒë·ªÅ CHUY√äN S√ÇU cho ƒë·ªãnh h∆∞·ªõng Khoa h·ªçc m√°y t√≠nh (CS)
            cs: [
                {
                    id: "E-CS",
                    name: "Chuy√™n ƒë·ªÅ E (CS): L·∫≠p tr√¨nh n√¢ng cao v√† C·∫•u tr√∫c d·ªØ li·ªáu",
                    desc: "T·∫≠p trung chuy√™n s√¢u v√†o l·∫≠p tr√¨nh, c·∫•u tr√∫c d·ªØ li·ªáu v√† gi·∫£i thu·∫≠t ph·ª©c t·∫°p h∆°n.",
                    lessons: [
                        { num: 19, title: "L√†m vi·ªác v·ªõi T·ªáp v√† X·ª≠ l√≠ ngo·∫°i l·ªá (Files and Exceptions)", type: "practice" },
                        { num: 20, title: "Ki·ªÉu d·ªØ li·ªáu t·ª´ ƒëi·ªÉn (Dictionary) v√† Tuple", type: "practice" },
                        { num: 21, title: "ƒê·ªá quy v√† c√°c ·ª©ng d·ª•ng c∆° b·∫£n", type: "theory" },
                        { num: 22, title: "Th·ª±c h√†nh: X√¢y d·ª±ng ch∆∞∆°ng tr√¨nh m√¥ ph·ªèng/·ª©ng d·ª•ng nh·ªè", type: "practice" }
                    ]
                }
            ],
            // Ch·ªß ƒë·ªÅ CHUY√äN S√ÇU cho ƒë·ªãnh h∆∞·ªõng Tin h·ªçc ·ª©ng d·ª•ng (ICT)
            ict: [
                {
                    id: "E-ICT",
                    name: "Chuy√™n ƒë·ªÅ E (ICT): ·ª®ng d·ª•ng Tin h·ªçc (Web v√† ƒêa ph∆∞∆°ng ti·ªán)",
                    desc: "T·∫≠p trung chuy√™n s√¢u v√†o thi·∫øt k·∫ø trang web v√† x·ª≠ l√≠ ƒëa ph∆∞∆°ng ti·ªán.",
                    lessons: [
                        { num: 19, title: "Thi·∫øt k·∫ø trang web c∆° b·∫£n (N√¢ng cao HTML/CSS)", type: "practice" },
                        { num: 20, title: "X·ª≠ l√≠ ·∫£nh c∆° b·∫£n (Kƒ© thu·∫≠t n√¢ng cao)", type: "practice" },
                        { num: 21, title: "Bi√™n t·∫≠p video c∆° b·∫£n (Kƒ© thu·∫≠t d·ª±ng phim)", type: "practice" },
                        { num: 22, title: "Th·ª±c h√†nh: T·∫°o website ƒë∆°n gi·∫£n v√† s·∫£n ph·∫©m ƒëa ph∆∞∆°ng ti·ªán", type: "practice" }
                    ]
                }
            ]
        };

        // --- STATE MANAGEMENT ---
        let currentMode = 'cs'; // 'cs' or 'ict'
        let chartInstances = {};

        // --- DOM ELEMENTS ---
        const container = document.getElementById('curriculum-container');
        const searchInput = document.getElementById('search-input');
        const btnCS = document.getElementById('btn-cs');
        const btnICT = document.getElementById('btn-ict');
        const badge = document.getElementById('total-lessons-badge');

        // --- INITIALIZATION ---
        function init() {
            // 1. Kh·ªüi t·∫°o bi·ªÉu ƒë·ªì tr∆∞·ªõc
            initCharts();
            // 2. Thi·∫øt l·∫≠p ch·∫ø ƒë·ªô v√† hi·ªÉn th·ªã n·ªôi dung (bao g·ªìm c·∫£ vi·ªác c·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì)
            setMode('cs'); 
            // 3. L·∫Øng nghe s·ª± ki·ªán t√¨m ki·∫øm
            searchInput.addEventListener('input', renderContent);
        }

        // --- CORE FUNCTIONS ---
        function setMode(mode) {
            currentMode = mode;
            updateUIState();
            renderContent();
            updateCharts();
        }

        function updateUIState() {
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t b·∫•m (m√†u xanh cho CS, m√†u cam cho ICT)
            if (currentMode === 'cs') {
                btnCS.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-teal-600 text-white shadow-md hover:bg-teal-700";
                btnICT.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50";
            } else {
                btnICT.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-orange-600 text-white shadow-md hover:bg-orange-700";
                btnCS.className = "px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-white text-slate-600 border border-slate-300 hover:bg-slate-50";
            }
        }

        function getDataByMode() {
            // L·∫•y d·ªØ li·ªáu c·ªët l√µi + chuy√™n ƒë·ªÅ t∆∞∆°ng ·ª©ng
            const core = [...curriculumData.core];
            const elective = currentMode === 'cs' ? [...curriculumData.cs] : [...curriculumData.ict];
            return [...core, ...elective];
        }

        // --- RENDERING CONTENT ---
        function renderContent() {
            const data = getDataByMode();
            const searchTerm = searchInput.value.toLowerCase();
            let html = '';
            let totalLessons = 0;

            data.forEach(topic => {
                // L·ªçc b√†i h·ªçc theo t·ª´ kh√≥a t√¨m ki·∫øm
                const filteredLessons = topic.lessons.filter(l => 
                    l.title.toLowerCase().includes(searchTerm) || 
                    l.num.toString().includes(searchTerm)
                );

                const topicMatches = topic.name.toLowerCase().includes(searchTerm);
                const lessonsToShow = (searchTerm === '' || topicMatches) ? topic.lessons : filteredLessons;

                // Chi·ªÅu d√†i th·ª±c t·∫ø c·ªßa ch·ªß ƒë·ªÅ (ƒë·ªÉ t√≠nh t·ªïng s·ªë b√†i)
                const realLessonCount = topic.lessons.length; 
                
                // Chi·ªÅu d√†i b√†i h·ªçc hi·ªÉn th·ªã (sau khi t√¨m ki·∫øm)
                const displayLessonCount = lessonsToShow.length;

                if (displayLessonCount > 0 || topicMatches) {
                    // C·∫ßn t√≠nh t·ªïng b√†i h·ªçc th·ª±c t·∫ø, kh√¥ng b·ªã ·∫£nh h∆∞·ªüng b·ªüi b·ªô l·ªçc t√¨m ki·∫øm
                    totalLessons += realLessonCount; 
                    
                    // X√°c ƒë·ªãnh m√†u s·∫Øc cho Ch·ªß ƒë·ªÅ (Teal cho CS, Orange cho ICT)
                    const isElective = topic.id.startsWith('E');
                    const headerColor = isElective 
                        ? (currentMode === 'cs' ? 'border-l-4 border-teal-500 bg-teal-50' : 'border-l-4 border-orange-500 bg-orange-50') 
                        : 'border-l-4 border-blue-500 bg-white';
                    
                    const titleColor = isElective
                        ? (currentMode === 'cs' ? 'text-teal-700' : 'text-orange-700')
                        : 'text-blue-700';

                    // Ch·ªâ hi·ªÉn th·ªã c√°c b√†i h·ªçc ph√π h·ª£p v·ªõi t√¨m ki·∫øm
                    const finalLessonsToDisplay = (searchTerm !== '' && !topicMatches) ? filteredLessons : lessonsToShow;

                    html += `
                        <div class="topic-card rounded-lg shadow-sm border border-slate-200 overflow-hidden">
                            <div class="${headerColor} p-4 cursor-pointer" onclick="toggleDetails('${topic.id}')">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h3 class="font-bold text-lg ${titleColor}">${topic.name}</h3>
                                        <p class="text-sm text-slate-500 mt-1">${topic.desc}</p>
                                    </div>
                                    <span class="text-slate-400 text-sm font-mono bg-white px-2 py-1 rounded border border-slate-200">
                                        ${realLessonCount} B√†i
                                    </span>
                                </div>
                            </div>
                            <div id="details-${topic.id}" class="bg-white p-4 ${searchTerm !== '' ? 'block' : 'hidden'} border-t border-slate-100">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    ${finalLessonsToDisplay.map(lesson => `
                                        <div class="lesson-item pl-3 py-2 text-sm text-slate-700 bg-slate-50 rounded-r hover:bg-slate-100 flex justify-between items-center group">
                                            <span>
                                                <span class="font-bold text-slate-400 mr-2">B√†i ${lesson.num}:</span>
                                                ${lesson.title}
                                            </span>
                                            ${lesson.type === 'practice' 
                                                ? '<span class="text-[10px] uppercase font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded ml-2 opacity-70 group-hover:opacity-100">Th·ª±c h√†nh</span>' 
                                                : '<span class="text-[10px] uppercase font-bold text-slate-500 bg-slate-200 px-2 py-0.5 rounded ml-2 opacity-0 group-hover:opacity-50">L√Ω thuy·∫øt</span>'}
                                        </div>
                                    `).join('')}
                                </div>
                                ${finalLessonsToDisplay.length === 0 && searchTerm !== '' ? `<div class="text-center text-slate-400 italic py-2">Kh√¥ng c√≥ b√†i h·ªçc n√†o trong ch·ªß ƒë·ªÅ n√†y kh·ªõp v·ªõi t·ª´ kh√≥a.</div>` : ''}
                            </div>
                        </div>
                    `;
                }
            });

            if (html === '') {
                html = `<div class="text-center py-10 text-slate-400">Kh√¥ng t√¨m th·∫•y ch·ªß ƒë·ªÅ ho·∫∑c b√†i h·ªçc n√†o ph√π h·ª£p v·ªõi t·ª´ kh√≥a "${searchTerm}".</div>`;
                // ƒê·∫∑t l·∫°i t·ªïng s·ªë b√†i h·ªçc v·ªÅ 0 n·∫øu kh√¥ng t√¨m th·∫•y g√¨
                badge.innerText = `0 B√†i`; 
            } else {
                // C·∫≠p nh·∫≠t t·ªïng s·ªë b√†i h·ªçc L·ªöP 11: 27 B√†i (22 C·ªët l√µi + 5 Chuy√™n ƒë·ªÅ)
                // L∆∞u √Ω: totalLessons sau v√≤ng l·∫∑p l√† 27 (ho·∫∑c 27 * 2 n·∫øu c√≥ l·ªói logic), c·∫ßn ki·ªÉm tra l·∫°i logic
                // ƒê·∫∑t c·ªë ƒë·ªãnh l√† 27 b√†i cho ch∆∞∆°ng tr√¨nh L·ªõp 11
                badge.innerText = `27 B√†i`; 
            }

            container.innerHTML = html;
        }

        // Toggle Accordion
        window.toggleDetails = function(id) {
            const el = document.getElementById(`details-${id}`);
            if (el) {
                if (el.classList.contains('hidden')) {
                    el.classList.remove('hidden');
                    el.classList.add('block');
                } else {
                    el.classList.add('hidden');
                    el.classList.remove('block');
                }
            }
        }

        // --- CHARTS LOGIC ---
        function initCharts() {
            // Chart 1: Topic Distribution (Doughnut)
            const ctx1 = document.getElementById('topicDistributionChart').getContext('2d');
            chartInstances.topic = new Chart(ctx1, {
                type: 'doughnut',
                data: getTopicChartData(),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { boxWidth: 12, font: { size: 11 } } },
                        tooltip: { 
                            callbacks: {
                                label: function(context) {
                                    return ` ${context.label}: ${context.raw} b√†i`;
                                }
                            }
                        }
                    }
                }
            });

            // Chart 2: Theory vs Practice (Bar)
            const ctx2 = document.getElementById('practiceRatioChart').getContext('2d');
            chartInstances.practice = new Chart(ctx2, {
                type: 'bar',
                data: getPracticeChartData(),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true, 
                            ticks: { 
                                stepSize: 1,
                                // Hi·ªÉn th·ªã s·ªë nguy√™n n·∫øu c√≥ th·ªÉ
                                callback: function(value) { if (value % 1 === 0) { return value; } } 
                            } 
                        },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'S·ªë l∆∞·ª£ng b√†i Th·ª±c h√†nh vs L√Ω thuy·∫øt' }
                    }
                }
            });
        }

        function updateCharts() {
            // Ki·ªÉm tra xem c√°c ƒë·ªëi t∆∞·ª£ng bi·ªÉu ƒë·ªì ƒë√£ ƒë∆∞·ª£c kh·ªüi t·∫°o ch∆∞a tr∆∞·ªõc khi c·∫≠p nh·∫≠t
            if (chartInstances.topic) {
                const topicData = getTopicChartData();
                chartInstances.topic.data = topicData;
                chartInstances.topic.update();
            }
            
            if (chartInstances.practice) {
                const practiceData = getPracticeChartData();
                chartInstances.practice.data = practiceData;
                chartInstances.practice.update();
            }
        }

        function getTopicChartData() {
            const data = getDataByMode();
            const labels = data.map(t => t.name);
            const counts = data.map(t => t.lessons.length);
            
            // M√†u s·∫Øc t∆∞∆°ng ·ª©ng v·ªõi c√°c Ch·ªß ƒë·ªÅ (Palette l·ªõp 11)
            const bgColors = labels.map(name => {
                if (name.includes('A')) return '#94a3b8'; // Slate
                if (name.includes('B')) return '#475569'; // Dark Slate
                if (name.includes('C')) return '#3b82f6'; // Blue (L·∫≠p tr√¨nh)
                if (name.includes('D')) return '#60a5fa'; // Light Blue
                if (name.includes('F')) return '#1e40af'; // Dark Blue (Khoa h·ªçc t√≠nh to√°n)
                if (name.includes('G')) return '#93c5fd'; // Lightest Blue
                if (name.includes('(CS)')) return '#14b8a6'; // Teal (CS)
                if (name.includes('(ICT)')) return '#f97316'; // Orange (ICT)
                return '#ccc';
            });

            return {
                labels: labels,
                datasets: [{
                    data: counts,
                    backgroundColor: bgColors,
                    borderWidth: 0
                }]
            };
        }

        function getPracticeChartData() {
            const data = getDataByMode();
            let practiceCount = 0;
            let theoryCount = 0;

            data.forEach(t => {
                t.lessons.forEach(l => {
                    if (l.type === 'practice') practiceCount++;
                    else theoryCount++;
                });
            });

            return {
                labels: ['L√Ω thuy·∫øt', 'Th·ª±c h√†nh'],
                datasets: [{
                    label: 'S·ªë l∆∞·ª£ng b√†i',
                    data: [theoryCount, practiceCount],
                    backgroundColor: ['#94a3b8', currentMode === 'cs' ? '#14b8a6' : '#f97316'], // M√†u s·∫Øc theo ƒë·ªãnh h∆∞·ªõng
                    borderRadius: 5
                }]
            };
        }

        // --- RUN ---
        window.onload = init;

    </script>
</body>
</html>